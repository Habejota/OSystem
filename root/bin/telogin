#!/bin/bash.exe
builtin echo "
Welcome to MobaXterm embedded telnet server.
Note: telnet protocol is not secure: network traffic is not encrypted and
it can be quite easy for other machines on the same network to eavesdrop on
the communication and record such things as passwords and other sensitive data.
You should consider using SSH instead of telnet if possible.
You can also disable telnet service from MobaXterm Professional Customizer.
"
builtin echo -n "Please enter your password: "
read -s ans
builtin echo
/bin/MobaSendMsg.exe MobaXterm "-telog|$ans"
ret="$?"
if [ "$ret" = "36" ]; then
  builtin echo "
  Login successful
  "
  /bin/bash.exe -l -i
elif [ "$ret" = "32" ]; then
  builtin echo "
  Connection refused by server.
  "
  sleep 1
else
  builtin echo "
  Invalid password. Exiting.
  "
  sleep 1
fi
